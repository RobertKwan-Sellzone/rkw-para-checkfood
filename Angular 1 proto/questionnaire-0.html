<!doctype html>
<html ng-app="DummyApp">

<head>
  <meta charset="utf-8">
  <title>PARA-CHECKFOOD : Ang. 0</title>
  <script src="angular.min.js"></script>
</head>

<script>
  var app = angular.module('DummyApp', []);
  app.controller('GensController', function ($http) {
    this.gens = [
      { nom: "Robert", age: 666, couleur: "green" },
      { nom: "Mégane", age: 22, couleur: "pink" },
      { nom: "Michael", age: 39, couleur: "#4aa" }
    ];

    this.totalAge = function(){
      return this.gens.map(p => p.age).reduce((total, inc) => total + inc);
    };
    
    this.send = function(){
      console.log(this.gens);
      $http.post("http://localhost:80/storeThis", this.gens);
    };

    this.addPersonne = function(){
      this.gens.push({});
      //this.gens.push({nom:"default name", age:0});
    };
  });
</script>

<body>

  <div style="border:2px solid black" ng-controller="GensController as gensCtrl">
    <b>Total = {{gensCtrl.totalAge()}} ans</b>

    <div ng-repeat="personne in gensCtrl.gens" style="background-color: {{personne.couleur}};">
      <input type="text" ng-model="personne.nom" /> âgé de
      <input type="number" ng-model="personne.age" />
    </div>
    
    <button ng-click="gensCtrl.send()" >Fire me up</button>
    <button ng-click="gensCtrl.addPersonne()" >+</button> (don't do this yet !)
  </div>

</body>

</html>