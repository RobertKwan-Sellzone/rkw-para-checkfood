<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Questionnaire</title>

    <!-- Charge React-->
    <script src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>

    <!-- Transpileur/Compilateur : permet la syntaxe JSX -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />

</head>

<body>
    <div id="root"></div>


    <!-- Charge le composant React -->
    <script type="text/babel">

        var list = [{ nom: 'Robert', age: 46, background: 'pink' },
        { nom: 'Michael', age: 39, background: 'cyan' },
        { nom: 'Jose', age: 22, background: 'gray' }];

        class Identite extends React.Component {

            constructor(props) {
                super(props);
                this.state = {
                    value: '',
                    list: list,
                    name: '',
                };
            }

            /*updateAge(event) {
                this.setState({ value: event.target.value });
            };*/

            updateName(event) {
                this.setState({ name: event.target.value });
            }


            addPerson() {
                this.setState(state => {
                    const list = state.list.concat(state.value);
                    

                    return {
                        list,
                        value: '',
                    };
                });
            };

            render() {

                return (
                    <div>
                        <ul>
                            {this.state.list.map((person, index) => (
                                <li key="index" style={{ backgroundColor: person.background }}>
                                    <div>
                                        <input type="text" value={person.nom} onChange={this.updateName.bind(this)} />
                                        âgé de
                                        <input
                                            type="number"
                                            value={person.age}
                                        //onChange={this.updateAge.bind(this)}
                                        />
                                    </div>
                                </li>
                            ))}
                        </ul>
                        <button
                            id="add"
                            type="button"
                            onClick={this.addPerson.bind(this) || console.log(JSON.stringify({person}))}
                        >+</button>
                    </div>
                );
            }
        }

        class Questionnaire extends React.Component {

            /*constructor(props) {
                super(props);
                this.state = { ages: listAge }
            }*/

            render() {

                //var sumAge = list.map(p => p.age).reduce((acc, age) => acc + age);

                return (
                    <div>
                    <Identite />
                    
                    </div>
                    
                    //<h4>Total : {sumAge}</h4>
                );
            }
        }


        ReactDOM.render(
            <Questionnaire />,
            document.getElementById('root')
        );
    </script>

</body>

</html>